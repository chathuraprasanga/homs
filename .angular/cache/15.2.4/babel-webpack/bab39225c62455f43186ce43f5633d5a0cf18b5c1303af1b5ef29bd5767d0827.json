{"ast":null,"code":"import { BehaviorSubject, Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class OrderAddEditService {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    this.order = new BehaviorSubject({});\n    this.onProductsChanged = new Subject();\n    this.onHardwaresChanged = new Subject();\n  }\n  resolve() {\n    this.getOrderByID();\n    this.getAllProducts();\n    this.getAllHardwares();\n  }\n  getOrderByID() {\n    // console.log(\"call getHardwareByID\")\n    let orderID = sessionStorage.getItem(\"orderID\");\n    // console.log(hardwareID)\n    if (orderID != null) {\n      this.httpClient.get(`http://localhost:8082/api/v1/order/search-order/${orderID}`).subscribe(order => {\n        // console.log(hardware)\n        this.order.next(order);\n      });\n    } else {\n      // console.log(\"Hardware ID null\")\n      this.order.next({});\n    }\n  }\n  //get all active products\n  getAllProducts() {\n    this.httpClient.get(`http://localhost:8082/api/v1/product/get-all-active-product`).subscribe(products => {\n      // console.log(\"products\",products)\n      this.onProductsChanged.next(products);\n    });\n  }\n  // should develop method to get all active hardwares\n  getAllHardwares() {\n    this.httpClient.get(`http://localhost:8082/api/v1/hardware/get-all-active-hardware`).subscribe(hardwares => {\n      // console.log(\"hardwares\",hardwares)\n      this.onHardwaresChanged.next(hardwares);\n    });\n  }\n  saveOrder(order) {\n    this.httpClient.post('http://localhost:8082/api/v1/order/save-and-update-order', order).subscribe(order => {\n      this.order.next(order);\n    });\n  }\n  getProductPriceByID(productID) {\n    // console.log(productID);\n    this.httpClient.get(\"http://localhost:8082/api/v1/product//get-product-price-by-ID\" + \"/\" + productID).subscribe(productPrice => {\n      console.log(productPrice);\n    });\n  }\n}\nOrderAddEditService.ɵfac = function OrderAddEditService_Factory(t) {\n  return new (t || OrderAddEditService)(i0.ɵɵinject(i1.HttpClient));\n};\nOrderAddEditService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: OrderAddEditService,\n  factory: OrderAddEditService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAGA,SAAQA,eAAe,EAAcC,OAAO,QAAO,MAAM;;;AAKzD,OAAM,MAAOC,mBAAmB;EAS9BC,YAAoBC,UAAsB;IAAtB,eAAU,GAAVA,UAAU;IAN9B,UAAK,GAAG,IAAIJ,eAAe,CAAC,EAAE,CAAC;IAC/B,sBAAiB,GAAG,IAAIC,OAAO,EAAE;IACjC,uBAAkB,GAAG,IAAIA,OAAO,EAAE;EAIY;EAE9CI,OAAO;IACL,IAAI,CAACC,YAAY,EAAE;IACnB,IAAI,CAACC,cAAc,EAAE;IACrB,IAAI,CAACC,eAAe,EAAE;EACxB;EAEAF,YAAY;IACV;IAEA,IAAIG,OAAO,GAAGC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;IAC/C;IAEA,IAAIF,OAAO,IAAG,IAAI,EAAC;MACjB,IAAI,CAACL,UAAU,CAACQ,GAAG,CAAC,mDAAmDH,OAAO,EAAE,CAAC,CAC9EI,SAAS,CAAEC,KAAK,IAAI;QACnB;QACA,IAAI,CAACA,KAAK,CAACC,IAAI,CAACD,KAAK,CAAC;MACxB,CAAC,CAAC;KACL,MAAK;MACJ;MACA,IAAI,CAACA,KAAK,CAACC,IAAI,CAAC,EAAE,CAAC;;EAGvB;EAEA;EACAR,cAAc;IACZ,IAAI,CAACH,UAAU,CAACQ,GAAG,CAAC,6DAA6D,CAAC,CAC/EC,SAAS,CAAEG,QAAQ,IAAG;MACrB;MACA,IAAI,CAACC,iBAAiB,CAACF,IAAI,CAACC,QAAQ,CAAC;IACvC,CAAC,CAAC;EACN;EAGA;EACAR,eAAe;IACb,IAAI,CAACJ,UAAU,CAACQ,GAAG,CAAC,+DAA+D,CAAC,CACjFC,SAAS,CAAEK,SAAS,IAAG;MACtB;MACA,IAAI,CAACC,kBAAkB,CAACJ,IAAI,CAACG,SAAS,CAAC;IACzC,CAAC,CAAC;EACN;EAEAE,SAAS,CAACN,KAAW;IACnB,IAAI,CAACV,UAAU,CAACiB,IAAI,CAAC,0DAA0D,EAAEP,KAAK,CAAC,CACpFD,SAAS,CAAEC,KAAK,IAAI;MACnB,IAAI,CAACA,KAAK,CAACC,IAAI,CAACD,KAAK,CAAC;IACxB,CAAC,CAAC;EACN;EAEAQ,mBAAmB,CAACC,SAAS;IAC3B;IACA,IAAI,CAACnB,UAAU,CAACQ,GAAG,CAAC,+DAA+D,GAAC,GAAG,GAACW,SAAS,CAAC,CAC/FV,SAAS,CAAEW,YAAY,IAAI;MAC1BC,OAAO,CAACC,GAAG,CAACF,YAAY,CAAC;IAC3B,CAAC,CAAC;EACN;;AApEWtB,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;SAAnBA,mBAAmB;EAAAyB,SAAnBzB,mBAAmB;EAAA0B,YAFlB;AAAM","names":["BehaviorSubject","Subject","OrderAddEditService","constructor","httpClient","resolve","getOrderByID","getAllProducts","getAllHardwares","orderID","sessionStorage","getItem","get","subscribe","order","next","products","onProductsChanged","hardwares","onHardwaresChanged","saveOrder","post","getProductPriceByID","productID","productPrice","console","log","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Chathura Prasanga\\Desktop\\HOM system\\Front-End\\homs\\src\\app\\services\\order\\order-add-edit.service.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {Resolve} from \"@angular/router\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {BehaviorSubject, Observable, Subject} from \"rxjs\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OrderAddEditService implements Resolve<any>{\n\n\n  order = new BehaviorSubject({});\n  onProductsChanged = new Subject();\n  onHardwaresChanged = new Subject();\n\n\n\n  constructor(private httpClient :HttpClient) { }\n\n  resolve():Observable<any> | Promise<any> | any {\n    this.getOrderByID();\n    this.getAllProducts();\n    this.getAllHardwares();\n  }\n\n  getOrderByID(){\n    // console.log(\"call getHardwareByID\")\n\n    let orderID = sessionStorage.getItem(\"orderID\");\n    // console.log(hardwareID)\n\n    if (orderID!= null){\n      this.httpClient.get(`http://localhost:8082/api/v1/order/search-order/${orderID}`)\n        .subscribe((order) => {\n          // console.log(hardware)\n          this.order.next(order);\n        })\n    }else {\n      // console.log(\"Hardware ID null\")\n      this.order.next({})\n    }\n\n  }\n\n  //get all active products\n  getAllProducts(){\n    this.httpClient.get(`http://localhost:8082/api/v1/product/get-all-active-product`)\n      .subscribe((products)=>{\n        // console.log(\"products\",products)\n        this.onProductsChanged.next(products)\n      })\n  }\n\n\n  // should develop method to get all active hardwares\n  getAllHardwares(){\n    this.httpClient.get(`http://localhost:8082/api/v1/hardware/get-all-active-hardware`)\n      .subscribe((hardwares)=>{\n        // console.log(\"hardwares\",hardwares)\n        this.onHardwaresChanged.next(hardwares)\n      })\n  }\n\n  saveOrder(order : any){\n    this.httpClient.post('http://localhost:8082/api/v1/order/save-and-update-order', order)\n      .subscribe((order) =>{\n        this.order.next(order);\n      })\n  }\n\n  getProductPriceByID(productID){\n    // console.log(productID);\n    this.httpClient.get(\"http://localhost:8082/api/v1/product//get-product-price-by-ID\"+\"/\"+productID)\n      .subscribe((productPrice) => {\n        console.log(productPrice)\n      })\n  }\n\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}